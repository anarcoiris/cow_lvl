[2025-10-02 17:00:10] INFO root: init_logging: logfile=logs\log_20251002_150010.txt
[2025-10-02 17:00:10] INFO __main__: Logging initialized
[2025-10-02 17:00:17] INFO root: Config loaded from config\gui_config.json
[2025-10-02 17:00:17] ERROR __main__: DB writer failed to start
Traceback (most recent call last):
  File "C:\Users\aladin\Documents\github\cow-lvl\tradeapp.py", line 1005, in _db_writer_loop
    conn = sqlite3.connect(str(db_path), check_same_thread=True, timeout=5.0)
sqlite3.OperationalError: unable to open database file
[2025-10-02 17:00:17] ERROR root: DB writer failed to start:
Traceback (most recent call last):
  File "C:\Users\aladin\Documents\github\cow-lvl\tradeapp.py", line 1005, in _db_writer_loop
    conn = sqlite3.connect(str(db_path), check_same_thread=True, timeout=5.0)
sqlite3.OperationalError: unable to open database file

[2025-10-02 17:00:45] INFO websocket: Websocket connected
[2025-10-02 17:00:45] INFO root: WS open (callback)
[2025-10-02 17:01:04] INFO root: Prediction worker started (background).
[2025-10-02 17:01:04] INFO root: SQLite not found for prediction: C:\Users\soyko\Documents\git2\Market\project assistant\env.model_0.9\0.9f\fibopkg3\data_manager\exports\marketdata_replica.db
[2025-10-02 17:01:04] INFO root: SQLite not found: C:\Users\soyko\Documents\git2\Market\project assistant\env.model_0.9\0.9f\fibopkg3\data_manager\exports\marketdata_replica.db
[2025-10-02 17:01:05] INFO root: Refreshed model metadata from GUI state.
[2025-10-02 17:01:13] INFO root: Prepare: loading data from sqlite...
[2025-10-02 17:01:13] INFO root: Prepare thread started.
[2025-10-02 17:01:13] INFO root: SQLite not found: C:\Users\soyko\Documents\git2\Market\project assistant\env.model_0.9\0.9f\fibopkg3\data_manager\exports\marketdata_replica.db
[2025-10-02 17:01:13] INFO root: No data; abort prepare.
[2025-10-02 17:01:14] INFO root: Prepare: loading data from sqlite...
[2025-10-02 17:01:14] INFO root: Prepare thread started.
[2025-10-02 17:01:14] INFO root: SQLite not found: C:\Users\soyko\Documents\git2\Market\project assistant\env.model_0.9\0.9f\fibopkg3\data_manager\exports\marketdata_replica.db
[2025-10-02 17:01:14] INFO root: No data; abort prepare.
[2025-10-02 17:01:17] INFO root: Big trade sell 5.15806@118764.35
[2025-10-02 17:01:33] INFO root: Prepare: loading data from sqlite...
[2025-10-02 17:01:33] INFO root: Prepare thread started.
[2025-10-02 17:01:34] INFO root: Loaded 106041 rows from sqlite.
[2025-10-02 17:01:35] INFO root: Computed features. Shape: (106041, 47)
[2025-10-02 17:01:35] INFO root: dropna: before=106041, after=105992, removed=49
[2025-10-02 17:01:35] INFO root: Feature cols selected (39): ['log_close', 'ret_1', 'log_ret_1', 'ret_5', 'log_ret_5', 'sma_5', 'sma_20', 'sma_50', 'ema_5', 'ema_20', 'ema_50', 'ma_diff_20', 'bb_m', 'bb_std', 'bb_up', 'bb_dn', 'bb_width', 'rsi_14', 'atr_14', 'raw_vol_10']...
[2025-10-02 17:01:35] INFO root: Building sequences...
[2025-10-02 17:01:42] INFO root: Sequences built: N=105845, seq_len=128, features=39
[2025-10-02 17:01:53] INFO root: Scaler fitted and df_scaled prepared.
[2025-10-02 17:01:53] INFO root: Preview raw (first 5 rows):
   id   symbol timeframe          ts       open       high        low      close     volume  source     created_at     updated_at                 timestamp
0   1  BTCUSDT        1m  1752231240  118117.79  118129.59  118090.00  118093.63    9.27987  influx  1759186315000  1759406605000 2025-07-11 10:54:00+00:00
1   2  BTCUSDT        1m  1752231300  118093.63  118093.63  117980.00  117980.01  111.28787  influx  1759186315000  1759406605000 2025-07-11 10:55:00+00:00
2   3  BTCUSDT        1m  1752231360  117980.00  118023.34  117980.00  118022.39    9.13797  influx  1759186315000  1759406605000 2025-07-11 10:56:00+00:00
3   4  BTCUSDT        1m  1752231420  118022.38  118022.38  117946.72  117968.01   30.41224  influx  1759186315000  1759406605000 2025-07-11 10:57:00+00:00
4   5  BTCUSDT        1m  1752231480  117968.01  117968.01  117964.71  117964.72    7.69926  influx  1759186315000  1759406605000 2025-07-11 10:58:00+00:00
[2025-10-02 17:01:53] INFO root: Preview features (first 5 rows):
           close           high            low  log_close     ret_1  log_ret_1     ret_5  log_ret_5          sma_5         sma_20         sma_50          ema_5         ema_20         ema_50  ma_diff_20           bb_m     bb_std          bb_up          bb_dn  bb_width     rsi_14     atr_14  raw_vol_10  raw_vol_30      fib_r_236  dist_fib_r_236      fib_r_382  dist_fib_r_382      fib_r_500  dist_fib_r_500      fib_r_618  dist_fib_r_618      fib_r_786  dist_fib_r_786   fibext_1272  dist_fibext_1272    fibext_1618  dist_fibext_1618    fibext_2000  dist_fibext_2000  td_buy_setup  td_sell_setup    volume           timestamp       open   symbol timeframe
0  117783.406250  117802.007812  117783.406250  11.676602 -0.000158  -0.000158  0.000130   0.000130  117794.093750  117726.835938  117817.375000  117788.960938  117759.851562  117815.523438   56.574001  117726.835938  62.577103  117851.992188  117601.679688  0.002126  74.286270  28.154285    0.000165    0.000244  117712.117188        0.130470  117791.898438       -0.015530  117856.375000       -0.133530  117920.851562       -0.251530  118012.656250       -0.419530  118278.21875         -0.905530  118467.281250         -1.251530  118676.023438         -1.633530             1              0   9.38562 2025-07-11 11:43:00  117802.00  BTCUSDT        1m
1  117763.007812  117783.421875  117751.218750  11.676430 -0.000173  -0.000173 -0.000181  -0.000181  117789.820312  117732.296875  117810.757812  117780.312500  117760.156250  117813.460938   30.714001  117732.296875  60.602898  117853.500000  117611.093750  0.002059  63.416958  25.852142    0.000176    0.000238  117707.632812        0.104987  117784.640625       -0.041013  117846.882812       -0.159013  117909.117188       -0.277013  117997.726562       -0.445013  118254.06250         -0.931013  118436.554688         -1.277013  118638.039062         -1.659013             2              0   8.65069 2025-07-11 11:44:00  117783.42  BTCUSDT        1m
2  117740.632812  117763.007812  117727.843750  11.676239 -0.000190  -0.000190 -0.000493  -0.000493  117778.210938  117738.859375  117805.968750  117767.085938  117758.296875  117810.609375    1.772500  117738.859375  53.255333  117845.367188  117632.343750  0.001809  59.572964  27.683571    0.000189    0.000234  117707.632812        0.062555  117784.640625       -0.083445  117846.882812       -0.201445  117909.117188       -0.319445  117997.726562       -0.487445  118254.06250         -0.973445  118436.554688         -1.319445  118638.039062         -1.701445             3              0  12.10969 2025-07-11 11:45:00  117763.01  BTCUSDT        1m
3  117710.046875  117740.632812  117710.046875  11.675980 -0.000260  -0.000260 -0.000781  -0.000781  117759.820312  117743.359375  117799.726562  117748.070312  117753.703125  117806.664062  -33.310501  117743.359375  45.987026  117835.335938  117651.382812  0.001562  48.687981  24.362858    0.000138    0.000239  117707.632812        0.004577  117784.640625       -0.141423  117846.882812       -0.259423  117909.117188       -0.377423  117997.726562       -0.545423  118254.06250         -1.031423  118436.554688         -1.377423  118638.039062         -1.759423             4              0   9.20696 2025-07-11 11:46:00  117740.63  BTCUSDT        1m
4  117700.007812  117710.062500  117700.000000  11.675895 -0.000085  -0.000085 -0.000866  -0.000866  117739.421875  117744.781250  117794.367188  117732.054688  117748.585938  117802.476562  -44.774502  117744.781250  44.045681  117832.875000  117656.695312  0.001496  39.702305  22.860714    0.000137    0.000233  117707.632812       -0.014458  117784.640625       -0.160458  117846.882812       -0.278458  117909.117188       -0.396458  117997.726562       -0.564458  118254.06250         -1.050458  118436.554688         -1.396458  118638.039062         -1.778458             5              0  10.32029 2025-07-11 11:47:00  117710.06  BTCUSDT        1m
[2025-10-02 17:01:53] INFO root: Preview scaled (first 5 rows):
           close           high            low  log_close     ret_1  log_ret_1     ret_5  log_ret_5     sma_5    sma_20    sma_50     ema_5    ema_20    ema_50  ma_diff_20      bb_m    bb_std     bb_up     bb_dn  bb_width    rsi_14    atr_14  raw_vol_10  raw_vol_30  fib_r_236  dist_fib_r_236  fib_r_382  dist_fib_r_382  fib_r_500  dist_fib_r_500  fib_r_618  dist_fib_r_618  fib_r_786  dist_fib_r_786  fibext_1272  dist_fibext_1272  fibext_1618  dist_fibext_1618  fibext_2000  dist_fibext_2000  td_buy_setup  td_sell_setup    volume           timestamp       open   symbol timeframe
0  117783.406250  117802.007812  117783.406250   0.653629 -0.360845  -0.359976  0.135306   0.135521  0.654152  0.633009  0.661752  0.652564  0.643558  0.661485    0.462713  0.633009 -0.170580  0.624222  0.640984 -0.186458  1.292540 -0.492646   -0.699365   -0.502342   0.670524       -0.441296   0.673730       -0.441296   0.676212       -0.441296   0.678596       -0.441296   0.681822       -0.441296     0.690031         -0.441296     0.694867         -0.441296     0.699254         -0.441296     -0.339867      -0.636787   9.38562 2025-07-11 11:43:00  117802.00  BTCUSDT        1m
1  117763.007812  117783.421875  117751.218750   0.647377 -0.395910  -0.394981 -0.184504  -0.183677  0.652803  0.634733  0.659662  0.649835  0.643654  0.660833    0.253113  0.634733 -0.204134  0.624696  0.643964 -0.219341  0.712113 -0.562629   -0.655938   -0.525851   0.669103       -0.520754   0.671434       -0.520754   0.673212       -0.520754   0.674892       -0.520755   0.677119       -0.520754     0.682476         -0.520754     0.685319         -0.520754     0.687550         -0.520755     -0.045344      -0.636787   8.65069 2025-07-11 11:44:00  117783.42  BTCUSDT        1m
2  117740.632812  117763.007812  117727.843750   0.640467 -0.434494  -0.433500 -0.505370  -0.504029  0.649140  0.636804  0.658149  0.645661  0.643067  0.659932    0.018538  0.636804 -0.329014  0.622139  0.650689 -0.341593  0.506841 -0.506955   -0.610067   -0.543365   0.669103       -0.653059   0.671434       -0.653059   0.673212       -0.653059   0.674892       -0.653059   0.677119       -0.653059     0.682476         -0.653059     0.685319         -0.653059     0.687550         -0.653059      0.249180      -0.636787  12.10969 2025-07-11 11:45:00  117763.01  BTCUSDT        1m
3  117710.046875  117740.632812  117710.046875   0.631071 -0.594116  -0.592857 -0.801680  -0.799952  0.643336  0.638225  0.656178  0.639660  0.641617  0.658685   -0.265816  0.638225 -0.452547  0.618985  0.656714 -0.462500 -0.074423 -0.607902   -0.800489   -0.523185   0.669103       -0.833840   0.671434       -0.833840   0.673212       -0.833840   0.674892       -0.833840   0.677119       -0.833840     0.682476         -0.833840     0.685319         -0.833840     0.687550         -0.833840      0.543703      -0.636787   9.20696 2025-07-11 11:46:00  117740.63  BTCUSDT        1m
4  117700.007812  117710.062500  117700.000000   0.627996 -0.194541  -0.193965 -0.889415  -0.887589  0.636899  0.638674  0.654485  0.634606  0.640001  0.657362   -0.358733  0.638674 -0.485542  0.618211  0.658396 -0.494794 -0.554263 -0.653565   -0.806931   -0.548748   0.669103       -0.893194   0.671434       -0.893194   0.673212       -0.893194   0.674892       -0.893194   0.677119       -0.893194     0.682476         -0.893194     0.685319         -0.893194     0.687550         -0.893194      0.838226      -0.636787  10.32029 2025-07-11 11:47:00  117710.06  BTCUSDT        1m
[2025-10-02 17:01:53] INFO root: Prepare stage finished successfully.
[2025-10-02 17:05:02] INFO root: Big trade buy 10.48207@118600.0
